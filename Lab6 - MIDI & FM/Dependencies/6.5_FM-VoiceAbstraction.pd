#N canvas 73 91 1175 658 12;
#X obj 2 7 cnv 15 1113 25 empty empty 6.5:\ Monophonic\ FM\ Synth 20 12 0 14 #dcdcdc #404040 0;
#X obj 662 127 hsl 107 37 0.1 1000 1 1 empty empty Modulator\ Ratio -2 -8 0 10 #fcfcfc #000000 #000000 7931 1;
#X obj 784 127 hsl 107 37 0.1 10000 1 1 empty empty Modulator\ Depth -2 -8 0 10 #fcfcfc #000000 #000000 8913 1;
#X obj 929 127 hsl 107 37 10 1000 1 1 empty empty Attack -2 -8 0 10 #fcfcfc #000000 #000000 1485 1;
#X obj 1051 127 hsl 103 37 0.001 10000 1 1 empty empty Release -2 -8 0 10 #fcfcfc #000000 #000000 10200 1;
#X obj 447 115 notein;
#X obj 447 144 stripnote;
#X text 21 36 Make a playable monophonic synth using the library version of our new abstraction. This time we get our carrier frequency from [notein] and to keep the tone consistent for any note \, the modulator will be a multiple of the carrier., f 112;
#X text 21 184 2 - create [simpleFM~] and [ar~] abstractions;
#X text 21 213 3 - multiply frequency by modulator ratio (we need a value if either note changes), f 45;
#X text 21 258 4- connect [simpleFM~] with relevant values;
#X text 21 287 5 - split the velocity value into a triggered bang and float., f 45;
#X text 21 332 6 - connect the bang to [ar~];
#X obj 443 406 simpleFM~;
#X obj 684 406 ar~, f 9;
#X text 21 362 comment, f 46;
#X text 21 116 1 - convert MIDI to freq / vol. We've used [mtof] for frequency before. We cam create a volume value from velocity. Divide by 127 to get a 0-1 range \, then square it for a more natural volume curve.;
#X text 21 361 7 - use signal rate multiply objects to scale the FM signal by the volume and envelope, f 46;
#X text 21 406 8 - test!;
#X obj 447 173 mtof;
#X obj 589 212 / 127;
#X obj 589 236 pow 2;
#X obj 507 173 t b f;
#X obj 447 264 s \$0-freq;
#X obj 517 264 s \$0-trig;
#X obj 589 264 s \$0-vol;
#X obj 659 169 s \$0-modR;
#X obj 781 169 s \$0-modD;
#X obj 926 169 s \$0-att;
#X obj 1048 169 s \$0-rel;
#X obj 443 358 r \$0-freq;
#X obj 512 358 r \$0-modR;
#X obj 581 358 r \$0-modD;
#X obj 684 358 r \$0-trig;
#X obj 754 358 r \$0-att;
#X obj 817 358 r \$0-rel;
#X obj 443 521 *~;
#X obj 461 494 *~;
#X obj 461 453 r \$0-vol;
#X obj 443 550 stereoOut~;
#X connect 1 0 26 0 empty;
#X connect 2 0 27 0 empty;
#X connect 3 0 28 0 empty;
#X connect 4 0 29 0 empty;
#X connect 5 0 6 0 empty;
#X connect 5 1 6 1 empty;
#X connect 6 0 19 0 empty;
#X connect 6 1 22 0 empty;
#X connect 13 0 36 0 empty;
#X connect 14 0 37 1 empty;
#X connect 19 0 23 0 empty;
#X connect 20 0 21 0 empty;
#X connect 21 0 25 0 empty;
#X connect 22 0 24 0 empty;
#X connect 22 1 20 0 empty;
#X connect 30 0 13 0 empty;
#X connect 31 0 13 1 empty;
#X connect 32 0 13 2 empty;
#X connect 33 0 14 0 empty;
#X connect 34 0 14 1 empty;
#X connect 35 0 14 2 empty;
#X connect 36 0 39 0 empty;
#X connect 36 0 39 1 empty;
#X connect 37 0 36 1 empty;
#X connect 38 0 37 0 empty;
