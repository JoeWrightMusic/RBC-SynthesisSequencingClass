#N canvas 533 51 808 630 12;
#X obj 150 158 notein;
#X floatatom 150 193 5 0 0 0 - - -;
#X floatatom 193 193 5 0 0 0 - - -;
#X text 243 212 <-- convert notes to frequency \, convert velocity
to amplitude, f 31;
#X obj 150 216 mtof;
#X obj 193 216 / 127;
#X obj 150 245 osc~ 100;
#X msg 223 135 60 64;
#X obj 223 158 unpack f f;
#X obj 194 429 adsr~, f 19;
#X obj 150 453 *~;
#X obj 150 476 *~ 0.1;
#X obj 150 501 dac~;
#X msg 273 135 60 0;
#X obj 223 113 sel 1 0;
#X obj 223 92 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 3 3 cnv 15 800 60 empty empty ADSR_ENVELOPES 20 12 0 20 -233017
-66577 0;
#X text 21 34 Attack-Decay-Sustain-Release;
#X text 6 126 Test the ADSR envelope with a MIDI interface -->, f
19;
#X text 313 93 <-- or with this 'fake' midi note control here!, f
14;
#X obj 226 270 vsl 30 150 2 5000 1 0 empty empty A 8 20 0 25 -261682
-1 -1 3800 1;
#X obj 257 270 vsl 30 150 2 5000 1 0 empty empty D 8 20 0 25 -261682
-1 -1 3400 1;
#X obj 288 270 vsl 30 150 0.001 1 1 0 empty empty S 8 20 0 25 -204786
-1 -1 12000 1;
#X obj 319 270 vsl 30 150 2 5000 1 0 empty empty R 8 20 0 25 -261682
-1 -1 500 1;
#X text 512 87 ADSR envelopes are really common in all sorts of synths.
This example shows a basic use case for this kind of envelope., f
40;
#X text 512 147 We have four parameters that can be modified:, f 40
;
#X text 512 187 ATTACK (ms): the time it takes to ramp up to the peak
amplitude of a note. In this case the peak is determined by the velocity
of the incoming note., f 40;
#X text 512 257 RELEASE (ms): the time it takes to ramp down to the
sustain level after the initial attack., f 40;
#X text 512 317 SUSTAIN (amp \, 0-1): the level the note sustains at
after attack and decay. In this case \, we calculate this as a proportion
of the peak amplitude used in the attack stage. We get this by multiplying
by a number between 0 & 1 (where 0 is silent and 1 is the same level
as the peak), f 40;
#X text 512 447 RELEASE (ms): the time it takes for the envelope to
fade back to 0 (silent) once the note is released., f 40;
#X obj 183 590 adsr~, f 9;
#X text 23 535 To see how the ADSR envelope works in Pd \, double click
(or right click > open) on the [adsr~] object to see what's going on
inside...;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 9 0;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 8 1 2 0;
#X connect 9 0 10 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 11 0 12 1;
#X connect 13 0 8 0;
#X connect 14 0 7 0;
#X connect 14 1 13 0;
#X connect 15 0 14 0;
#X connect 20 0 9 1;
#X connect 21 0 9 2;
#X connect 22 0 9 3;
#X connect 23 0 9 4;
